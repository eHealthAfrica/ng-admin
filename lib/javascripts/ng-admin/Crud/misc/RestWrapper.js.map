{"version":3,"sources":["../../../../../src/javascripts/ng-admin/Crud/misc/RestWrapper.js"],"names":["RestWrapper","Restangular","setFullResponse","entityName","url","oneUrl","get","then","response","status","data","params","allUrl","getList","rawEntity","method","resource","operation","customOperation","customPOST","customPUT","customDELETE","$inject"],"mappings":";;;;;;;;;;IAAqBA,W;AACjB,yBAAYC,WAAZ,EAAyB;AAAA;;AACrB,aAAKA,WAAL,GAAmBA,WAAnB;;AAEAA,oBAAYC,eAAZ,CAA4B,IAA5B;AACH;;AAED;;;;;;;;;;;;+BAQOC,U,EAAYC,G,EAAK;AACpB,mBAAO,KAAKH,WAAL,CACFI,MADE,CACKF,UADL,EACiBC,GADjB,EAEFE,GAFE,GAGFC,IAHE,CAGG,UAAUC,QAAV,EAAoB;AACxB,oBAAIA,SAASC,MAAT,IAAmB,GAAvB,EAA4B;AAC1B,0BAAMD,QAAN;AACD,iBAFD,MAGI;AACF,2BAAOA,SAASE,IAAhB;AACD;AACF,aAVE,CAAP;AAWH;;AAED;;;;;;;;;;;;gCASQC,M,EAAQR,U,EAAYC,G,EAAK;AAC7B,mBAAO,KAAKH,WAAL,CACFW,MADE,CACKT,UADL,EACiBC,GADjB,EAEFS,OAFE,CAEMF,MAFN,CAAP;AAGH;;;kCAESG,S,EAAWX,U,EAAYC,G,EAAKW,M,EAAQ;AAC1C,gBAAIC,WAAW,KAAKf,WAAL,CAAiBI,MAAjB,CAAwBF,UAAxB,EAAoCC,GAApC,CAAf;AAAA,gBACIa,YAAYF,SAASC,SAASE,eAAT,CAAyBH,MAAzB,EAAiC,IAAjC,EAAuC,EAAvC,EAA2C,EAA3C,EAA+CD,SAA/C,CAAT,GAAqEE,SAASG,UAAT,CAAoBL,SAApB,CADrF;;AAGA,mBAAOG,UAAUV,IAAV,CAAe,UAAUC,QAAV,EAAoB;AACxC,oBAAIA,SAASC,MAAT,IAAmB,GAAvB,EAA4B;AAC1B,0BAAMD,QAAN;AACD,iBAFD,MAGI;AACF,2BAAOA,SAASE,IAAhB;AACD;AACF,aAPM,CAAP;AAQH;;;kCAESI,S,EAAWX,U,EAAYC,G,EAAKW,M,EAAQ;AAC1C,gBAAIC,WAAW,KAAKf,WAAL,CAAiBI,MAAjB,CAAwBF,UAAxB,EAAoCC,GAApC,CAAf;AAAA,gBACIa,YAAYF,SAASC,SAASE,eAAT,CAAyBH,MAAzB,EAAiC,IAAjC,EAAuC,EAAvC,EAA2C,EAA3C,EAA+CD,SAA/C,CAAT,GAAqEE,SAASI,SAAT,CAAmBN,SAAnB,CADrF;;AAGA,mBAAOG,UAAUV,IAAV,CAAe,UAAUC,QAAV,EAAoB;AACxC,oBAAIA,SAASC,MAAT,IAAmB,GAAvB,EAA4B;AACxB,0BAAMD,QAAN;AACH,iBAFD,MAGI;AACF,2BAAOA,SAASE,IAAhB;AACD;AACF,aAPM,CAAP;AAQH;;;kCAESP,U,EAAYC,G,EAAK;AACvB,mBAAO,KAAKH,WAAL,CACNI,MADM,CACCF,UADD,EACaC,GADb,EAEFiB,YAFE,EAAP;AAGH;;;;;;kBA5EgBrB,W;;;AA+ErBA,YAAYsB,OAAZ,GAAsB,CAAC,aAAD,CAAtB","file":"RestWrapper.js","sourcesContent":["export default class RestWrapper {\n    constructor(Restangular) {\n        this.Restangular = Restangular;\n\n        Restangular.setFullResponse(true);\n    }\n\n    /**\n     * Returns the promise of one resource by URL\n     *\n     * @param {String} entityName\n     * @param {String} url\n     *\n     * @returns {promise}\n     */\n    getOne(entityName, url) {\n        return this.Restangular\n            .oneUrl(entityName, url)\n            .get()\n            .then(function (response) {\n              if (response.status >= 400) {\n                throw response;\n              }\n              else{\n                return response.data;\n              }\n            });\n    }\n\n    /**\n     * Returns the promise of a list of resources\n     *\n     * @param {Object} params\n     * @param {String} entityName\n     * @param {String} url\n     *\n     * @returns {promise}\n     */\n    getList(params, entityName, url) {\n        return this.Restangular\n            .allUrl(entityName, url)\n            .getList(params);\n    }\n\n    createOne(rawEntity, entityName, url, method) {\n        var resource = this.Restangular.oneUrl(entityName, url),\n            operation = method ? resource.customOperation(method, null, {}, {}, rawEntity) : resource.customPOST(rawEntity);\n\n        return operation.then(function (response) {\n          if (response.status >= 400) {\n            throw response;\n          }\n          else{\n            return response.data;\n          }\n        });\n    }\n\n    updateOne(rawEntity, entityName, url, method) {\n        var resource = this.Restangular.oneUrl(entityName, url),\n            operation = method ? resource.customOperation(method, null, {}, {}, rawEntity) : resource.customPUT(rawEntity);\n\n        return operation.then(function (response) {\n          if (response.status >= 400) {\n              throw response;\n          }\n          else{\n            return response.data;\n          }\n        });\n    }\n\n    deleteOne(entityName, url) {\n        return this.Restangular\n        .oneUrl(entityName, url)\n            .customDELETE();\n    }\n}\n\nRestWrapper.$inject = ['Restangular'];\n"]}